<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple Markers on OpenStreetMap</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        body { margin: 0; }
        #map { height: 100vh; width: 100vw; }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
    // Initialize the map
    const map = L.map('map').setView([22.362891, 114.050456], 14); // Default center

    // Add OpenStreetMap tiles
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    // Function to get URL parameters
    function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[[]]/g, '\\$&');
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
              results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    // Parse marker parameters
    const markers = [];
    let i = 1;
    while (true) {
        const marker = getParameterByName('marker' + i);
        if (!marker) break;
        markers.push(marker.split(','));
        i++;
    }

    // Add markers to the map
    markers.forEach(coords => {
        const lat = parseFloat(coords[0]);
        const lon = parseFloat(coords[1]);
        L.marker([lat, lon]).addTo(map)
            .bindPopup(`Lat: ${lat}, Lon: ${lon}`);
    });

    // Adjust view to fit all markers
    if (markers.length > 0) {
        const bounds = markers.map(coords => [parseFloat(coords[0]), parseFloat(coords[1])]);
        map.fitBounds(bounds);
    }
</script>

</body>
</html>
